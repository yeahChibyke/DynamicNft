// SPDX-License-Identifier: SEE LICENSE IN LICENSE
pragma solidity >= 0.8.0;

import {Test, console2} from "forge-std/Test.sol";
import {DeployFaceNft} from "../script/DeployFaceNft.s.sol";

contract TDFN is Test {
    DeployFaceNft public deployer;

    function setUp() public {
        deployer = new DeployFaceNft();
    }

    function testConvertSvgToUri() public view {
        string memory expectedUri =
            "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCA2NCA2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgYXJpYS1oaWRkZW49InRydWUiIHJvbGU9ImltZyIgY2xhc3M9Imljb25pZnkgaWNvbmlmeS0tZW1vamlvbmUtbW9ub3RvbmUiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPjxwYXRoIGQ9Ik0zMiAyQzE1LjQzMiAyIDIgMTUuNDMyIDIgMzJzMTMuNDMyIDMwIDMwIDMwczMwLTEzLjQzMiAzMC0zMFM0OC41NjggMiAzMiAybTE4LjEwMyA5LjMyNGExNi40MTggMTYuNDE4IDAgMCAwLTguOTc5LS45MTVjLS43MDMuMTM1LS4xOTIgMi4yNy4zODggMi4xNTZjNC4xNjgtLjc0OCA4LjQ1Ni40IDExLjY5IDMuMTMzYy4xNjMuMTQyLjQ2OS4wMTUuNzY1LS4yMjJhMjcuNDkxIDI3LjQ5MSAwIDAgMSA0LjA2IDcuNjZDNTUuNzMgMTkuNDU2IDUxLjY1NyAxNyA0NyAxN2MtNC41MzMgMC04LjUyMSAyLjMyMy0xMC44NDggNS44NDJjLTIuNjg4LTEuMTY4LTUuODA1LTEuMDYxLTguMzAxLjAwN0MyNS41MjUgMTkuMzI2IDIxLjUzNyAxNyAxNyAxN2MtNC42NTcgMC04LjczIDIuNDU3LTExLjAyNiA2LjEzN2EyNy40NjggMjcuNDY4IDAgMCAxIDQuMTM2LTcuNzU4Yy4yNy4xOTcuNTM4LjI5OS42ODYuMTY5YTE0LjIzMyAxNC4yMzMgMCAwIDEgMTEuNjkyLTMuMTMzYy41OC4xMTMgMS4wOTItMi4wMjEuMzg5LTIuMTU2YTE2LjQxMSAxNi40MTEgMCAwIDAtOC42NzIuOEMxOS4wMDYgNi45NzMgMjUuMjE4IDQuNSAzMiA0LjVjNi45MjggMCAxMy4yNjIgMi41ODEgMTguMTAzIDYuODI0TTU3IDMwYzAgNS41MjEtNC40NzkgMTAtMTAgMTBzLTEwLTQuNDc5LTEwLTEwYzAtNS41MjQgNC40NzktMTAgMTAtMTBzMTAgNC40NzYgMTAgMTBtLTI5Ljk5OSAwYzAgNS41MjMtNC40NzkgMTAtMTAuMDAxIDEwYy01LjUyMiAwLTEwLTQuNDc3LTEwLTEwYzAtNS41MjQgNC40NzctMTAgMTAtMTBzMTAuMDAxIDQuNDc2IDEwLjAwMSAxME0zMiA1OS41Yy0xNC41NjMgMC0yNi41MTEtMTEuMzc5LTI3LjQzNi0yNS43MTJDNi4xODcgMzkuMTE5IDExLjEzOSA0MyAxNyA0M2M3LjE4IDAgMTMtNS44MiAxMy0xM2MwLTEuMjc2LS4xOTEtMi41MDYtLjUzNC0zLjY3MWMxLjUzLS40MzYgMy41NC0uNDM0IDUuMDY4LjAwMUExMi45NjQgMTIuOTY0IDAgMCAwIDM0IDMwYzAgNy4xOCA1LjgyIDEzIDEzIDEzYzUuODYxIDAgMTAuODEzLTMuODgxIDEyLjQzNi05LjIxMkM1OC41MTEgNDguMTIxIDQ2LjU2MyA1OS41IDMyIDU5LjUiIGZpbGw9IiMwMDAwMDAiPjwvcGF0aD48ZWxsaXBzZSBjeD0iMjAiIGN5PSIzMC41IiByeD0iNCIgcnk9IjUiIGZpbGw9IiMwMDAwMDAiPjwvZWxsaXBzZT48ZWxsaXBzZSBjeD0iNDQiIGN5PSIzMC41IiByeD0iNCIgcnk9IjUiIGZpbGw9IiMwMDAwMDAiPjwvZWxsaXBzZT48cGF0aCBkPSJNNDEuNDA0IDQ1LjE1Yy0zLjIyMyAyLjI2OS04LjM1MyAzLjgzNC0xMy42NiAyLjQzM2MtMS40MjEtLjM3Ny0yLjUzNSAzLjMxLTEuMDE4IDMuNzMzYzUuNzY3IDEuNTUgMTIuMDQ5LjQyOSAxNi45My0zLjAxNGMxLjIwNS0uODY4LTEuMDU0LTQuMDI3LTIuMjUyLTMuMTUyIiBmaWxsPSIjMDAwMDAwIj48L3BhdGg+PC9zdmc+";

        string memory svg =
            '<svg width="800px" height="800px" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--emojione-monotone" preserveAspectRatio="xMidYMid meet"><path d="M32 2C15.432 2 2 15.432 2 32s13.432 30 30 30s30-13.432 30-30S48.568 2 32 2m18.103 9.324a16.418 16.418 0 0 0-8.979-.915c-.703.135-.192 2.27.388 2.156c4.168-.748 8.456.4 11.69 3.133c.163.142.469.015.765-.222a27.491 27.491 0 0 1 4.06 7.66C55.73 19.456 51.657 17 47 17c-4.533 0-8.521 2.323-10.848 5.842c-2.688-1.168-5.805-1.061-8.301.007C25.525 19.326 21.537 17 17 17c-4.657 0-8.73 2.457-11.026 6.137a27.468 27.468 0 0 1 4.136-7.758c.27.197.538.299.686.169a14.233 14.233 0 0 1 11.692-3.133c.58.113 1.092-2.021.389-2.156a16.411 16.411 0 0 0-8.672.8C19.006 6.973 25.218 4.5 32 4.5c6.928 0 13.262 2.581 18.103 6.824M57 30c0 5.521-4.479 10-10 10s-10-4.479-10-10c0-5.524 4.479-10 10-10s10 4.476 10 10m-29.999 0c0 5.523-4.479 10-10.001 10c-5.522 0-10-4.477-10-10c0-5.524 4.477-10 10-10s10.001 4.476 10.001 10M32 59.5c-14.563 0-26.511-11.379-27.436-25.712C6.187 39.119 11.139 43 17 43c7.18 0 13-5.82 13-13c0-1.276-.191-2.506-.534-3.671c1.53-.436 3.54-.434 5.068.001A12.964 12.964 0 0 0 34 30c0 7.18 5.82 13 13 13c5.861 0 10.813-3.881 12.436-9.212C58.511 48.121 46.563 59.5 32 59.5" fill="#000000"></path><ellipse cx="20" cy="30.5" rx="4" ry="5" fill="#000000"></ellipse><ellipse cx="44" cy="30.5" rx="4" ry="5" fill="#000000"></ellipse><path d="M41.404 45.15c-3.223 2.269-8.353 3.834-13.66 2.433c-1.421-.377-2.535 3.31-1.018 3.733c5.767 1.55 12.049.429 16.93-3.014c1.205-.868-1.054-4.027-2.252-3.152" fill="#000000"></path></svg>';

        string memory actualUri = deployer.svgToImageURI(svg);

        assert(keccak256(abi.encode(actualUri)) == keccak256(abi.encode(expectedUri)));
    }
}
