// SPDX-License-Identifier: SEE LICENSE IN LICENSE
pragma solidity >= 0.8.0;

import {Test, console2} from "forge-std/Test.sol";
import {FaceNft} from "../src/FaceNft.sol";
import {DeployFaceNft} from "../script/DeployFaceNft.s.sol";

contract TestFaceNft is Test {
    FaceNft public faceNft;
    DeployFaceNft public deployer;

    string public constant NERD_FACE_TOKEN_URI =
        "data:application/json;base64,eyJuYW1lIjoiRmFjZSBORlQiLCAiZGVzY3JpcHRpb24iOiJGYWNlIE5GVCB0aGF0IHJlcHJlc2VudHMgdGhlIHBlcnNvbmFsaXR5IG9mIHRoZSBvd25lci4iLCAiYXR0cmlidXRlcyI6IFt7InRyYWl0X3R5cGUiOiAiVHlwZSIsICJ2YWx1ZSI6ICJTdmcgSW1hZ2UifSwgeyJ0cmFpdF90eXBlIjogIlBlcnNvbmFsaXR5IiwgInZhbHVlIjogIjEwMCUifSwgImltYWdlIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpT0RBd2NIZ2lJR2hsYVdkb2REMGlPREF3Y0hnaUlIWnBaWGRDYjNnOUlqQWdNQ0EyTkNBMk5DSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklpQjRiV3h1Y3pwNGJHbHVhejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TVRrNU9TOTRiR2x1YXlJZ1lYSnBZUzFvYVdSa1pXNDlJblJ5ZFdVaUlISnZiR1U5SW1sdFp5SWdZMnhoYzNNOUltbGpiMjVwWm5rZ2FXTnZibWxtZVMwdFpXMXZhbWx2Ym1VdGJXOXViM1J2Ym1VaUlIQnlaWE5sY25abFFYTndaV04wVW1GMGFXODlJbmhOYVdSWlRXbGtJRzFsWlhRaVBqeHdZWFJvSUdROUlrMHpNaUF5UXpFMUxqUXpNaUF5SURJZ01UVXVORE15SURJZ016SnpNVE11TkRNeUlETXdJRE13SURNd2N6TXdMVEV6TGpRek1pQXpNQzB6TUZNME9DNDFOamdnTWlBek1pQXliVEU0TGpFd015QTVMak15TkdFeE5pNDBNVGdnTVRZdU5ERTRJREFnTUNBd0xUZ3VPVGM1TFM0NU1UVmpMUzQzTURNdU1UTTFMUzR4T1RJZ01pNHlOeTR6T0RnZ01pNHhOVFpqTkM0eE5qZ3RMamMwT0NBNExqUTFOaTQwSURFeExqWTVJRE11TVRNell5NHhOak11TVRReUxqUTJPUzR3TVRVdU56WTFMUzR5TWpKaE1qY3VORGt4SURJM0xqUTVNU0F3SURBZ01TQTBMakEySURjdU5qWkROVFV1TnpNZ01Ua3VORFUySURVeExqWTFOeUF4TnlBME55QXhOMk10TkM0MU16TWdNQzA0TGpVeU1TQXlMak15TXkweE1DNDRORGdnTlM0NE5ESmpMVEl1TmpnNExURXVNVFk0TFRVdU9EQTFMVEV1TURZeExUZ3VNekF4TGpBd04wTXlOUzQxTWpVZ01Ua3VNekkySURJeExqVXpOeUF4TnlBeE55QXhOMk10TkM0Mk5UY2dNQzA0TGpjeklESXVORFUzTFRFeExqQXlOaUEyTGpFek4yRXlOeTQwTmpnZ01qY3VORFk0SURBZ01DQXhJRFF1TVRNMkxUY3VOelU0WXk0eU55NHhPVGN1TlRNNExqSTVPUzQyT0RZdU1UWTVZVEUwTGpJek15QXhOQzR5TXpNZ01DQXdJREVnTVRFdU5qa3lMVE11TVRNell5NDFPQzR4TVRNZ01TNHdPVEl0TWk0d01qRXVNemc1TFRJdU1UVTJZVEUyTGpReE1TQXhOaTQwTVRFZ01DQXdJREF0T0M0Mk56SXVPRU14T1M0d01EWWdOaTQ1TnpNZ01qVXVNakU0SURRdU5TQXpNaUEwTGpWak5pNDVNamdnTUNBeE15NHlOaklnTWk0MU9ERWdNVGd1TVRBeklEWXVPREkwVFRVM0lETXdZekFnTlM0MU1qRXROQzQwTnprZ01UQXRNVEFnTVRCekxURXdMVFF1TkRjNUxURXdMVEV3WXpBdE5TNDFNalFnTkM0ME56a3RNVEFnTVRBdE1UQnpNVEFnTkM0ME56WWdNVEFnTVRCdExUSTVMams1T1NBd1l6QWdOUzQxTWpNdE5DNDBOemtnTVRBdE1UQXVNREF4SURFd1l5MDFMalV5TWlBd0xURXdMVFF1TkRjM0xURXdMVEV3WXpBdE5TNDFNalFnTkM0ME56Y3RNVEFnTVRBdE1UQnpNVEF1TURBeElEUXVORGMySURFd0xqQXdNU0F4TUUwek1pQTFPUzQxWXkweE5DNDFOak1nTUMweU5pNDFNVEV0TVRFdU16YzVMVEkzTGpRek5pMHlOUzQzTVRKRE5pNHhPRGNnTXprdU1URTVJREV4TGpFek9TQTBNeUF4TnlBME0yTTNMakU0SURBZ01UTXROUzQ0TWlBeE15MHhNMk13TFRFdU1qYzJMUzR4T1RFdE1pNDFNRFl0TGpVek5DMHpMalkzTVdNeExqVXpMUzQwTXpZZ015NDFOQzB1TkRNMElEVXVNRFk0TGpBd01VRXhNaTQ1TmpRZ01USXVPVFkwSURBZ01DQXdJRE0wSURNd1l6QWdOeTR4T0NBMUxqZ3lJREV6SURFeklERXpZelV1T0RZeElEQWdNVEF1T0RFekxUTXVPRGd4SURFeUxqUXpOaTA1TGpJeE1rTTFPQzQxTVRFZ05EZ3VNVEl4SURRMkxqVTJNeUExT1M0MUlETXlJRFU1TGpVaUlHWnBiR3c5SWlNd01EQXdNREFpUGp3dmNHRjBhRDQ4Wld4c2FYQnpaU0JqZUQwaU1qQWlJR041UFNJek1DNDFJaUJ5ZUQwaU5DSWdjbms5SWpVaUlHWnBiR3c5SWlNd01EQXdNREFpUGp3dlpXeHNhWEJ6WlQ0OFpXeHNhWEJ6WlNCamVEMGlORFFpSUdONVBTSXpNQzQxSWlCeWVEMGlOQ0lnY25rOUlqVWlJR1pwYkd3OUlpTXdNREF3TURBaVBqd3ZaV3hzYVhCelpUNDhjR0YwYUNCa1BTSk5OREV1TkRBMElEUTFMakUxWXkwekxqSXlNeUF5TGpJMk9TMDRMak0xTXlBekxqZ3pOQzB4TXk0Mk5pQXlMalF6TTJNdE1TNDBNakV0TGpNM055MHlMalV6TlNBekxqTXhMVEV1TURFNElETXVOek16WXpVdU56WTNJREV1TlRVZ01USXVNRFE1TGpReU9TQXhOaTQ1TXkwekxqQXhOR014TGpJd05TMHVPRFk0TFRFdU1EVTBMVFF1TURJM0xUSXVNalV5TFRNdU1UVXlJaUJtYVd4c1BTSWpNREF3TURBd0lqNDhMM0JoZEdnK1BDOXpkbWMrIn0=";
    string public constant NINJA_FACE_TOKEN_URI =
        "data:application/json;base64,eyJuYW1lIjoiRmFjZSBORlQiLCAiZGVzY3JpcHRpb24iOiJGYWNlIE5GVCB0aGF0IHJlcHJlc2VudHMgdGhlIHBlcnNvbmFsaXR5IG9mIHRoZSBvd25lci4iLCAiYXR0cmlidXRlcyI6IFt7InRyYWl0X3R5cGUiOiAiVHlwZSIsICJ2YWx1ZSI6ICJTdmcgSW1hZ2UifSwgeyJ0cmFpdF90eXBlIjogIlBlcnNvbmFsaXR5IiwgInZhbHVlIjogIjEwMCUifSwgImltYWdlIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpT0RBd2NIZ2lJR2hsYVdkb2REMGlPREF3Y0hnaUlIWnBaWGRDYjNnOUlqQWdNQ0ExTVRJZ05URXlJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lQanh3WVhSb0lHWnBiR3c5SWlNd01EQXdNREFpSUdROUlrMHlPREF1TURVMElERTVMamcyTjJNdE5qUXVNekUxSURBdE1USXhMamMySURJNExqYzVNeTB4TlRrdU5qUXpJRGN6TGprek5DQXlOeTR6T0RjdU1EY2dPRGN1T1RJNElETXVNRFVnT1RZdU1USWdNalV1TnpJMkxUTTRMalF4TkMweE1pNHhNRFV0TnprdU56VXpMVEV4TGpJMkxURXdPQzQxTXpRdE9TNHpNREpoTWpBeExqQXhNeUF5TURFdU1ERXpJREFnTUNBd0xURXpMalkxTmlBeU15NHpNVFJqTXpFdU5UQTNMVGd1TXpBM0lERTBOeTQ1T1RndE15NHpOeUF4TlRRdU9DQXlNUzR5TmpndE56VXVPVGcxTFRFNExqWXlOQzB4TkRBdU5Ua3RPQzQyTlMweE5qSXVNRFU0TFRRdU9EazFMVGd1TnpZNElESXlMalEwTmkweE15NDFPRFFnTkRZdU9EQTFMVEV6TGpVNE5DQTNNaTR5TnpJZ01DQXhNVEV1TnpNMklEazJMakkwT0NBeU5qa3VPVFE1SURJeE1DNHpNalFnTWpZNUxqazBPU0ExTnk0NE1EZ2dNQ0F4TURrdU1TMDBNQzQyTXlBeE5EVXVOak0zTFRrMUxqSTBPQzB6TVM0ME1ETWdNak11T0RFeUxUazRMakEwSURVM0xqTXdPQzB4TXprdU1EQXlJRE0wTGpZME9DQTRNUzQxT1RJdE9DNDVPVFFnTVRNNUxqazJOUzAxTUM0NU56Z2dNVFUyTGpFNUxUWXpMak0xTXlBeU5TNHlNRGN0TkRjdU1UUXlJRE01TGprMU9TMHhNREF1TkRNeUlETTVMamsxT1MweE5EVXVPVGsySURBdE1URXhMamN6TnkwNU1pNDBOemN0TWpBeUxqTXhOeTB5TURZdU5UVXpMVEl3TWk0ek1UZDZiUzB1TURBeUlERTFNUzQyT1RKak1UQTFMakE0TkNBd0lERTVNQzR5TnpNZ01qY3VOekkzSURFNU1DNHlOek1nTmpFdU9UTXhJREFnTWpJdU1EUTNMVFF1TkRrMUlETXpMalE0TFRVM0xqYzVOeUEwTkM0ME5UTXRNamt1TXprZ05pNHdOVEl0T1RVdU1USTNMVE14TGpFNE1TMHhNekl1TkRjMkxUTXhMakU0TVMwek5DNDROalFnTUMwNE55NHhNaUEwTVM0ek5EVXRNVEUxTGpJeE9TQXpOaTR3TVRjdE5UWXVOVGszTFRFd0xqY3pNaTAzTlM0d05UTXRNall1TkRNekxUYzFMakExTXkwME9TNHlPRGtnTUMwek5DNHlNRFFnT0RVdU1UZzRMVFl4TGprek1TQXhPVEF1TWpjeUxUWXhMamt6TVhwdE9ETXVPRGcxSURNNUxqZzVOR010TWpBdU1UUXRMakV5TFRReExqVTNNU0F6TGpJNU5TMDBNUzQwTnpVZ09TNDVNUzR4T0RJZ01USXVORFV6SURFM0xqTTJOQ0F5TWk0eU9UZ2dNemd1TXpjM0lESXhMams1SURJeExqQXhNeTB1TXpBMklERTRMalUxTlMweE5pNHlNVFlnTXpjdU56RTNMVEl6TGpFd01TMHVNRGcxTFRVdU9ETTNMVEUyTGpnMUxUZ3VOamt6TFRNMExqWXlMVGd1TnprNWVtMHRNVGN5TGpZNE1pQXlMamc0TTJNdE1UY3VOemN1TVRBMUxUTTBMalV6TkNBeUxqazJOQzB6TkM0Mk1pQTRMamdnTVRrdU1UWXlJRFl1T0RnMUlERTJMamN3TkNBeU1pNDNPVFlnTXpjdU56RTRJREl6TGpFd01pQXlNUzR3TVRNdU16QTNJRE00TGpFNU5TMDVMalUwSURNNExqTTNOeTB5TVM0NU9USXVNRGsyTFRZdU5qRTFMVEl4TGpNek5pMHhNQzR3TXkwME1TNDBOelV0T1M0NU1YcHRPVEl1TlRjZ09ESXVORFF4WXpNeExqQXpNaUF3SURVMkxqRTRPQ0F5TlM0eU16VWdOVFl1TVRnNElESTFMakl6TlhNdE1qZ3VNVGcwTFRFeExqRXdOQzAxT1M0eU1UY3RNVEV1TVRBMFl5MHpNUzR3TXpJZ01DMDFNeTR4TmlBeE1TNHhNRFF0TlRNdU1UWWdNVEV1TVRBMGN6STFMakUxTmkweU5TNHlNelVnTlRZdU1Ua3RNalV1TWpNMWVrMHpNUzR5TlNBME1URXVNemxqTkM0ek5EUWdNaTR3TkRZZ055NDNPRE10TkRBdU16TTJJRFV5TGpJME5pMDJNUzR5TmpVdE9DNHhNVEV0T0M0ME5qVXRNVEl1TkRNNExUSTBMall6T0MweE5DNHlOQzB6TlM0MU1ESXRNekl1TnpNeklEUXVNVFU0TFRVMUxqQXhNaUE0TkM0NE9EY3RNemd1TURBMklEazJMamMyTjNwdE5UWXVNekV0TkRFdU5qazBZeTAzTGpVeE1TMHVNRFV5TFRFM0xqSTJMUzR5TWpndE1UY3VORFExSURFMkxqa3pOeTB1TkRrNElEUTJMak14TFRReUxqZ3dOU0E1Tmk0NU5UTXROREF1TVRJNElEazRMakl4TlNBM0xqRXpPQ0F6TGpNMk5DQTBPUzQxT1RndE16SXVNRGMzSURZeExqa3dOaTAxT1M0ME5DQTBMakUxT1MwNUxqSTBOQ0F4TVM0MU1UWXROVFV1TmpBekxUUXVNek16TFRVMUxqY3hNbm9pTHo0OEwzTjJaejQ9In0=";
    string public constant SMILE_FACE_TOKEN_URI =
        "data:application/json;base64,eyJuYW1lIjoiRmFjZSBORlQiLCAiZGVzY3JpcHRpb24iOiJGYWNlIE5GVCB0aGF0IHJlcHJlc2VudHMgdGhlIHBlcnNvbmFsaXR5IG9mIHRoZSBvd25lci4iLCAiYXR0cmlidXRlcyI6IFt7InRyYWl0X3R5cGUiOiAiVHlwZSIsICJ2YWx1ZSI6ICJTdmcgSW1hZ2UifSwgeyJ0cmFpdF90eXBlIjogIlBlcnNvbmFsaXR5IiwgInZhbHVlIjogIjEwMCUifSwgImltYWdlIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCb1pXbG5hSFE5SWpnd01IQjRJaUIzYVdSMGFEMGlPREF3Y0hnaUlIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUlrTmhjR0ZmTVNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWlCNGJXeHVjenA0YkdsdWF6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNVGs1T1M5NGJHbHVheUlnRFFvSklIWnBaWGRDYjNnOUlqQWdNQ0EwTlRJdU9UZzJJRFExTWk0NU9EWWlJSGh0YkRwemNHRmpaVDBpY0hKbGMyVnlkbVVpUGcwS1BHYytEUW9KUEdjK0RRb0pDVHhuUGcwS0NRa0pQSEJoZEdnZ2MzUjViR1U5SW1acGJHdzZJekF4TURBd01qc2lJR1E5SWsweU1qWXVORGt6TERCRE1UQXhMalUzTnl3d0xEQXNNVEF4TGpVM055d3dMREl5Tmk0ME9UTmpNQ3d4TWpRdU9EY3pMREV3TVM0MU56Y3NNakkyTGpRNU15d3lNall1TkRrekxESXlOaTQwT1RNTkNna0pDUWxqTVRJMExqZzFNaXd3TERJeU5pNDBPVE10TVRBeExqWXlMREl5Tmk0ME9UTXRNakkyTGpRNU0wTTBOVEl1T1RnMkxERXdNUzQxTnpjc016VXhMak0wTlN3d0xESXlOaTQwT1RNc01Ib2dUVEl5Tmk0ME9UTXNOREkzTGpjNU1nMEtDUWtKQ1dNdE1URXhMakEwTml3d0xUSXdNUzR6TWkwNU1DNHlPVFV0TWpBeExqTXlMVEl3TVM0eU9UbGpNQzB4TVRFdU1ESTFMRGt3TGpJM05DMHlNREV1TXpReUxESXdNUzR6TWkweU1ERXVNelF5WXpFeE1DNDVPRElzTUN3eU1ERXVNamMzTERrd0xqTXhOeXd5TURFdU1qYzNMREl3TVM0ek5ESU5DZ2tKQ1FsRE5ESTNMamMzTERNek55NDBPVFlzTXpNM0xqUTNOU3cwTWpjdU56a3lMREl5Tmk0ME9UTXNOREkzTGpjNU1ub2lMejROQ2drSkNUeHdZWFJvSUhOMGVXeGxQU0ptYVd4c09pTXdNVEF3TURJN0lpQmtQU0pOTVRRM0xqSTROU3d5TWpJdU5UQXpZekUyTGpneU5Td3dMRE13TGpRMU9DMHhNeTQxTkRZc016QXVORFU0TFRNd0xqTTFZekF0TVRZdU9EQTBMVEV6TGpZek15MHpNQzR6T1RNdE16QXVORFU0TFRNd0xqTTVNdzBLQ1FrSkNXTXRNVFl1TnpFM0xEQXRNekF1TXprekxERXpMalU1TFRNd0xqTTVNeXd6TUM0ek9UTlRNVE13TGpVMk9Dd3lNakl1TlRBekxERTBOeTR5T0RVc01qSXlMalV3TTNvaUx6NE5DZ2tKQ1R4amFYSmpiR1VnYzNSNWJHVTlJbVpwYkd3Nkl6QXhNREF3TWpzaUlHTjRQU0l6TURVdU5qTTJJaUJqZVQwaU1Ua3lMakV6TVNJZ2NqMGlNekF1TXpjeUlpOCtEUW9KQ1FrOGNHRjBhQ0J6ZEhsc1pUMGlabWxzYkRvak1ERXdNREF5T3lJZ1pEMGlUVEl5Tmk0ME9UTXNNemMxTGpZMU5XTTJNQzR6T1Rnc01Dd3hNVEl1TURFM0xUTTJMakE0T0N3eE16VXVOVEE0TFRnM0xqYzNNa2c1TVM0d01EY05DZ2tKQ1FsRE1URTBMalF4TVN3ek16a3VOVFkzTERFMk5pNHdNeXd6TnpVdU5qVTFMREl5Tmk0ME9UTXNNemMxTGpZMU5Yb2lMejROQ2drSlBDOW5QZzBLQ1R3dlp6NE5DZ2s4Wno0TkNnazhMMmMrRFFvSlBHYytEUW9KUEM5blBnMEtDVHhuUGcwS0NUd3ZaejROQ2drOFp6NE5DZ2s4TDJjK0RRb0pQR2MrRFFvSlBDOW5QZzBLQ1R4blBnMEtDVHd2Wno0TkNnazhaejROQ2drOEwyYytEUW9KUEdjK0RRb0pQQzluUGcwS0NUeG5QZzBLQ1R3dlp6NE5DZ2s4Wno0TkNnazhMMmMrRFFvSlBHYytEUW9KUEM5blBnMEtDVHhuUGcwS0NUd3ZaejROQ2drOFp6NE5DZ2s4TDJjK0RRb0pQR2MrRFFvSlBDOW5QZzBLQ1R4blBnMEtDVHd2Wno0TkNqd3ZaejROQ2p3dmMzWm5QZz09In0=";

    address Chibyke = makeAddr("Chibyke");

    function setUp() public {
        deployer = new DeployFaceNft();
        faceNft = deployer.run();
    }

    // >-----FaceNft Tests-----<

    // This particular test helped me get the tokenURIs of all the Faces
    function testCanViewTokenURI() public {
        vm.prank(Chibyke);

        faceNft.mintNft();

        console2.log(faceNft.tokenURI(0));
    }

    function testConfirmFirstMintIsNerd() public {
        vm.prank(Chibyke);
        faceNft.mintNft();

        assert(keccak256(abi.encodePacked(faceNft.tokenURI(0))) == keccak256(abi.encodePacked(NERD_FACE_TOKEN_URI)));
    }

    function testCanMintAndHaveBalance() public {
        vm.prank(Chibyke);
        faceNft.mintNft();

        assert(faceNft.balanceOf(Chibyke) == 1);
    }

    function testFlipFaceToNerd() public {
        vm.startPrank(Chibyke);
        faceNft.mintNft();
        faceNft.flipFaceToNerd(0);
        vm.stopPrank();

        assert(keccak256(abi.encodePacked(faceNft.tokenURI(0))) == keccak256(abi.encodePacked(NERD_FACE_TOKEN_URI)));
    }

    function testFlipFaceToNinja() public {
        vm.startPrank(Chibyke);
        faceNft.mintNft();
        faceNft.flipFaceToNinja(0);
        vm.stopPrank();

        assert(keccak256(abi.encodePacked(faceNft.tokenURI(0))) == keccak256(abi.encodePacked(NINJA_FACE_TOKEN_URI)));
    }

    function testFlipFaceToSmile() public {
        vm.startPrank(Chibyke);
        faceNft.mintNft();
        faceNft.flipFaceToSmile(0);
        vm.stopPrank();

        assert(keccak256(abi.encodePacked(faceNft.tokenURI(0))) == keccak256(abi.encodePacked(SMILE_FACE_TOKEN_URI)));
    }
}
